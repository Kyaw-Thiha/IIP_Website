---
---

<video class="w-screen" controls loop>
  <source src="/videos/BookKay.mp4" type="video/mp4" />
  <!-- <source src="movie.ogg" type="video/ogg" /> -->
  Your browser does not support the video tag.
</video>

<script>
  /*
  Function to automatically play the video when in user's view
  and pause the video when user scroll away from the video
  
  Threshold determines how much of the video has to be scrolled into before it is considered as visible.
  1 - video has to be fully visible when played
  0.1 - only 10% of video has to be visible in order to start playing
  */
  const useVideoAutoplay = () => {
    let videos = document.querySelectorAll("video");
    videos.forEach((video) => {
      // We can only control playback without insteraction if video is mute
      video.muted = true;
      // Play is a promise so we need to check we have it
      let playPromise = video.play();
      if (playPromise !== undefined) {
        playPromise.then((_) => {
          let observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.intersectionRatio !== 1 && !video.paused) {
                  video.pause();
                } else if (video.paused) {
                  video.play();
                }
              });
            },
            { threshold: 0.4 }
          );
          observer.observe(video);
        });
      }
    });
  };

  //Invoking the function
  useVideoAutoplay();
</script>
